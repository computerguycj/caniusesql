<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Command Compatibility Checker</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f7fa;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .search-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }
        input {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            flex-grow: 1;
            max-width: 500px;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.2s;
        }
        button:hover {
            background-color: #2980b9;
        }
        .filters {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
            justify-content: center;
        }
        .filter-group {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .filter-group h3 {
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 18px;
            color: #2c3e50;
        }
        .checkboxes {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .result-container {
            margin-top: 30px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        th, td {
            text-align: left;
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #3498db;
            color: white;
        }
        tr:hover {
            background-color: #f5f5f5;
        }
        .supported {
            color: #27ae60;
            font-weight: bold;
        }
        .not-supported {
            color: #e74c3c;
        }
        .partial {
            color: #f39c12;
        }
        .notes {
            font-size: 14px;
            color: #7f8c8d;
        }
        .result-message {
            text-align: center;
            margin: 20px 0;
        }
        .examples {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .examples h2 {
            margin-top: 0;
            color: #2c3e50;
        }
        .example {
            margin-bottom: 10px;
            cursor: pointer;
            color: #3498db;
        }
        .example:hover {
            text-decoration: underline;
        }
        .detail-view {
            margin-top: 20px;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .detail-view h2 {
            margin-top: 0;
            color: #2c3e50;
        }
        .syntax {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            border-left: 4px solid #3498db;
            font-family: monospace;
            white-space: pre-wrap;
            margin: 15px 0;
        }
        .version-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 14px;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        .version-supported {
            background-color: #e6f7ee;
            color: #27ae60;
            border: 1px solid #27ae60;
        }
        .version-not-supported {
            background-color: #fde8e8;
            color: #e74c3c;
            border: 1px solid #e74c3c;
        }
    </style>
</head>
<body>
    <h1>SQL Command Compatibility Checker</h1>
    
    <div class="examples">
        <h2>Popular SQL Commands</h2>
        <div class="example" onclick="searchCommand('SELECT')">SELECT</div>
        <div class="example" onclick="searchCommand('MERGE')">MERGE</div>
        <div class="example" onclick="searchCommand('PIVOT')">PIVOT</div>
        <div class="example" onclick="searchCommand('STRING AGG')">STRING AGG</div>
    </div>
    
    <div class="search-container">
        <input type="text" id="commandSearch" placeholder="Enter SQL command (e.g., MERGE, WITH, JSON_TABLE)">
        <button onclick="searchCommand()">Search</button>
    </div>
    
    <div class="filters">
        <div class="filter-group">
            <h3>Database Systems</h3>
            <div class="checkboxes">
                <div class="checkbox-item">
                    <input type="checkbox" id="mysql" checked>
                    <label for="mysql">MySQL</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="postgresql" checked>
                    <label for="postgresql">PostgreSQL</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="sqlserver" checked>
                    <label for="sqlserver">SQL Server</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="oracle" checked>
                    <label for="oracle">Oracle</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="sqlite" checked>
                    <label for="sqlite">SQLite</label>
                </div>
            </div>
        </div>
    </div>
    
    <div class="result-container" id="resultContainer">
        <div class="result-message">
            Search for a SQL command to see compatibility across different database systems.
        </div>
    </div>

    <div id="detailView" style="display: none;" class="detail-view">
    </div>

    <script>
        // Database of SQL commands and their compatibility
        let sqlDatabase = null;

        // Search for a command
        function searchCommand(command) {
            // Use the passed command or get from input
            const searchInput = command || document.getElementById('commandSearch').value.trim().toLowerCase();
            function escapeHTML(str) {
                return str.replace(/&/g, "&amp;")
                          .replace(/</g, "&lt;")
                          .replace(/>/g, "&gt;")
                          .replace(/\"/g, "&quot;")
                          .replace(/'/g, "&#39;")
                          .replace(/\//g, "&#x2F;");
            }
            if (!searchInput) return;
            
            // If command is passed, update the search box
            if (command) {
                document.getElementById('commandSearch').value = command;
            }
            
            // Update URL with search query
            updateURL(searchInput);
            
            // Get selected database systems
            const selectedDatabases = {
                mysql: document.getElementById('mysql').checked,
                postgresql: document.getElementById('postgresql').checked,
                sqlserver: document.getElementById('sqlserver').checked,
                oracle: document.getElementById('oracle').checked,
                sqlite: document.getElementById('sqlite').checked
            };
            
            // Find the command
            const foundCommand = Object.keys(sqlDatabase).find(cmd => cmd.toLowerCase() === searchInput.toLowerCase());
            const resultContainer = document.getElementById('resultContainer');
            
            if (foundCommand) {
                const commandData = sqlDatabase[foundCommand];
                
                // Build result table
                let resultHTML = `
                    <h2>Compatibility for "${foundCommand.toUpperCase()}"</h2>
                    <p>${commandData.description}</p>
                    <table>
                        <thead>
                            <tr>
                                <th>Database System</th>
                                <th>Support Status</th>
                                <th>Since Version</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                for (const [db, checked] of Object.entries(selectedDatabases)) {
                    if (!checked) continue;
                    
                    const dbInfo = commandData.compatibility[db];
                    const supportClass = dbInfo.supported ? 'supported' : 'not-supported';
                    const supportText = dbInfo.supported ? 'Supported' : 'Not Supported';
                    const versionText = dbInfo.since || '-';
                    
                    resultHTML += `
                        <tr>
                            <td>${db.charAt(0).toUpperCase() + db.slice(1)}</td>
                            <td class="${supportClass}">${supportText}</td>
                            <td>${versionText}</td>
                            <td class="notes">${dbInfo.notes}</td>
                        </tr>
                    `;
                }
                
                resultHTML += `
                        </tbody>
                    </table>
                    <button onclick="showDetails('${foundCommand}')" style="margin-top: 20px;">View Details</button>
                `;
                
                resultContainer.innerHTML = resultHTML;
            } else {
                // Search for similar commands
                const similarCommands = Object.keys(sqlDatabase).filter(cmd => 
                    cmd.toLowerCase().includes(searchInput.toLowerCase()) || 
                    searchInput.toLowerCase().includes(cmd.toLowerCase())
                );
                
                if (similarCommands.length > 0) {
                    let resultHTML = `
                        <div class="result-message">
                            <p>No exact match found for "${escapeHTML(searchInput)}". Did you mean:</p>
                            <ul>
                    `;
                    
                    similarCommands.forEach(cmd => {
                        resultHTML += `<li><a href="#" onclick="searchCommand('${cmd}'); return false;">${cmd.toUpperCase()}</a></li>`;
                    });
                    
                    resultHTML += `
                            </ul>
                        </div>
                    `;
                    
                    resultContainer.innerHTML = resultHTML;
                } else {
                    resultContainer.innerHTML = `
                        <div class="result-message">
                            <p>No results found for "${escapeHTML(searchInput)}".</p>
                            <p>Try searching for a different SQL command or check our examples above.</p>
                        </div>
                    `;
                }
            }
        }
        
        // Show detailed view for a command
        function showDetails(command) {
            const commandData = sqlDatabase[command];
            const detailView = document.getElementById('detailView');
            
            if (!commandData) return;
            
            let detailHTML = `
                <h2>${command.toUpperCase()} - Detailed Information</h2>
                <p>${commandData.details}</p>
                
                <h3>Standard Syntax</h3>
                <div class="syntax">${commandData.syntax}</div>
                
                <h3>Version Support</h3>
                <div>
            `;
            
            for (const [db, info] of Object.entries(commandData.compatibility)) {
                const badgeClass = info.supported ? 'version-supported' : 'version-not-supported';
                const versionText = info.supported ? 
                    `${db.charAt(0).toUpperCase() + db.slice(1)}: Since version ${info.since}` : 
                    `${db.charAt(0).toUpperCase() + db.slice(1)}: Not supported`;
                
                detailHTML += `<span class="version-badge ${badgeClass}">${versionText}</span>`;
            }
            
            detailHTML += `
                </div>
                
                <h3>Implementation Notes</h3>
                <ul>
            `;
            
            for (const [db, info] of Object.entries(commandData.compatibility)) {
                detailHTML += `<li><strong>${db.charAt(0).toUpperCase() + db.slice(1)}:</strong> ${info.notes}</li>`;
            }
            
            detailHTML += `
                </ul>
            `;
            
            detailView.innerHTML = detailHTML;
            detailView.style.display = 'block';
        }
        
        // Function to get query parameter from URL
        function getQueryParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Function to update URL with search query
        function updateURL(query) {
            const url = new URL(window.location);
            if (query && query.trim()) {
                url.searchParams.set('q', query.trim());
            } else {
                url.searchParams.delete('q');
            }
            window.history.replaceState({}, '', url);
        }

        // Function to initialize search from URL on page load
        function initializeFromURL() {
            const queryParam = getQueryParameter('q');
            if (queryParam) {
                document.getElementById('commandSearch').value = queryParam;
                searchCommand(queryParam);
            }
        }

        // Event listener for search box to enable search on Enter key
        document.getElementById('commandSearch').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                searchCommand();
            }
        });

        // Load data then initialize search from URL when page loads
        document.addEventListener('DOMContentLoaded', function() {
            fetch('data.json')
                .then(r => r.json())
                .then(data => {
                    sqlDatabase = data;
                    initializeFromURL();
                });
        });

        // Listen for back/forward browser navigation
        window.addEventListener('popstate', function(event) {
            initializeFromURL();
        });
    </script>
</body>
</html>
